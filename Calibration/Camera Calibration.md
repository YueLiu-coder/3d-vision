## Camera Calibration

相机标定涉及到的知识面：

- 成像几何

  世界坐标系->相机坐标系->成像平面坐标系->像素坐标系

- 镜头畸变

  - 径向畸变：镜头引起
  - 切向畸变：感光元器件和镜头不平行

- 单应性矩阵：平面到平面的transformation，从2d点（3\*1）到2d点，为3*3的矩阵

- 非线性优化：BA优化



相机标定的分类：

- 按照特征点分类：
  - 自标定

    找图片中的特征点，sift特征，surf特征

    

  - 标定板标定

    特征点易求，稳定性好

- 按照相机是否静止分类：

  - 静态相机标定

    标定板运动，相机静止

  - 动态相机标定

    标定板静止，相机运动

    有点类似于SLAM或3d重建

    

## 1物理模型

1. **浅谈标定**

   普通相机成像的误差

   - sensor制造产生的误差

     - pixel不是正方形
     - sensor歪斜

   - 镜头制造和安装产生的误差

     - 径向畸变：

       镜头一般存在非线性镜像畸变，包括：

       - 桶形畸变
       - 枕形畸变

     - 切向畸变：

       镜头与相机sensor安装不平行，还会产生切向畸变

   

2. **透视投影（Perspective）模型**

   ![img](https://pic4.zhimg.com/80/v2-f06178480b426e54a55cc8ee606116b7_720w.jpg)

   ![img](https://pic2.zhimg.com/80/v2-f65bac8057180048bde53918904e9955_720w.jpg)

   ![pinhole_camera_model](..\Picture\pinhole_camera_model.png)

   

3. **主点偏移**

   成像平面坐标系x0y和像素坐标系u0v的原点不重合，像素坐标系往往在图片的左上角，而光轴经过图像中心，因此图像坐标系和相机坐标系不重合。两个坐标系之间存在一个平移运动

   cx和cy

   ![img](https://pic3.zhimg.com/80/v2-849363945c1864677a7e4356806788b2_720w.jpg)

   

4. **图像传感器特性**

   sensors在制造的过程中可能不是正方形的，同时可能存在歪斜（skewed），因此需要考虑这些因素，传感器歪斜和不是正方形主要是对相机x和y方向的焦距产生影响

   ![image_sensors](..\Picture\image_sensors.png)

   ![img](https://pic2.zhimg.com/80/v2-e58c0b2bdcf3ae97497418bb86cfa501_720w.jpg)

   $\lambda$是缩放系数，在3d点到2d点的投影的过程中，可以直接将uvw的w归一化，从而求得u和v

   而2d无法求3d，因为丢失深度信息

   

5. **镜头畸变对成像的影响**

   pinhole camera model充分考虑相机内参对成像的影响，但是没有考虑另一个重要的部分：**镜头**。

   镜头分为

   - 普通镜头
   - 广角镜头
   - 鱼眼镜头

   

   普通镜头主要考虑

   - 镜像畸变
   - 切向畸变

   都可以用多项式来近似

   不适用于大广角、鱼眼镜头

   

   1. **径向畸变**

      ![径向畸变](..\Picture\径向畸变.png)

      从左到右为：

      - 无畸变
      - 桶形畸变
      - 枕形畸变

      径向畸变以某个中心点向外延伸，且越往外，畸变越大，显然畸变和距离是一种**非线性的变换关系**，可以通过**多项式来近似**
      $$
      \begin{cases}
      x_d = 
      \\
      y_d = 
      \end{cases}
      $$
      

      

      

   2. **切向畸变**

   

















reference:

https://zhuanlan.zhihu.com/p/87334006

https://www.twblogs.net/a/5b8b4a682b717718832e9793/?lang=zh-cn